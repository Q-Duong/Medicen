var typingTimer,doneTypingInterval=600;function getValues(t){return[{name:"accountant_number",value:$('input[name="accountant_number_'+t+'"]').val()},{name:"liquidation_number",value:$('input[name="liquidation_number_'+t+'"]').val()},{name:"contract_type",value:$(".contract_type_"+t).val()},{name:"contract_date",value:$('input[name="contract_date_'+t+'"]').val()},{name:"contract_status",value:$(".contract_status_"+t).val()}]}function getValuesFilter(){return[{name:"unit_name",value:$(".unit-name").val()},{name:"accountant_number",value:$(".accountant-number").val()},{name:"accountant_date",value:$(".accountant-date").val()},{name:"liquidation_number",value:$(".liquidation-number").val()},{name:"contract_type",value:$(".contract-type").val()},{name:"contract_date",value:$(".contract-date").val()},{name:"contract_status",value:$(".contract-status").val()}]}function getListContract(t){$.ajax({url:url_get_contract,method:"POST",async:!0,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:{year:t},beforeSend:function(){}}).done(function(t){$(".table-content").html(t.html)}).fail(function(t,a,n){popupNotificationSessionExpired()}).complete(function(){$(".loader-over").fadeOut()})}$(document).ready(function(){setTimeout(function(){getListContract()},1e3)}),$(".year-filter").on("change",function(){$(".loader-over").fadeIn(),getListContract($(".year-filter").val())}),$(document).on("change",".contract_status",function(){var t=$(this).val();$(this).removeClass("contract-status-1 contract-status-2 contract-status-3"),1==t?$(this).addClass("contract-status-1"):2==t?$(this).addClass("contract-status-2"):3==t&&$(this).addClass("contract-status-3")}),$(document).on("change",".unit-name, .accountant-number, .accountant-date, .liquidation-number, .contract-type, .contract-date, .contract-status",function(){var t=getValuesFilter();$(".loader-over").fadeIn(),$.ajax({url:url_filter_contract,method:"POST",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:t}).done(function(t){t.flagEmpty?$(".clear-filter").addClass("hidden"):$(".clear-filter").removeClass("hidden"),$(".tbody-content").html(t.html)}).fail(function(t,a,n){popupNotificationSessionExpired()}).complete(function(){$(".loader-over").fadeOut()})}),$(document).on("click",".btn-clear-filter",function(){$(".loader-over").fadeIn(),getListContract(),$(".clear-filter").addClass("hidden")}),$(document).on("change","input[type=text], .select-update",function(){var t=$(this).attr("name").split("_"),a=t.pop(),n=getValues(a);n.push({name:"id",value:a},{name:"currentChange",value:t.join("_")}),$.ajax({url:url_update_contract,method:"Patch",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:n}).done(function(t){}).fail(function(t,a,n){popupNotificationSessionExpired()}).complete(function(){$(".loader-over").fadeOut()})});